package com.belerweb.social.captcha.api;

import org.junit.Assert;
import org.junit.Test;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import com.belerweb.social.bean.Result;
import com.belerweb.social.captcha.bean.YundamaType;

public class YundamaTest {

  final static Logger logger = LoggerFactory.getLogger(YundamaTest.class);

  @Test
  public void testDecode() {
    try {
      byte[] img =
          new byte[] {-1, -40, -1, -32, 0, 16, 74, 70, 73, 70, 0, 1, 1, 0, 0, 1, 0, 1, 0, 0, -1,
              -2, 0, 59, 67, 82, 69, 65, 84, 79, 82, 58, 32, 103, 100, 45, 106, 112, 101, 103, 32,
              118, 49, 46, 48, 32, 40, 117, 115, 105, 110, 103, 32, 73, 74, 71, 32, 74, 80, 69, 71,
              32, 118, 54, 50, 41, 44, 32, 113, 117, 97, 108, 105, 116, 121, 32, 61, 32, 56, 48,
              10, -1, -37, 0, 67, 0, 6, 4, 5, 6, 5, 4, 6, 6, 5, 6, 7, 7, 6, 8, 10, 16, 10, 10, 9,
              9, 10, 20, 14, 15, 12, 16, 23, 20, 24, 24, 23, 20, 22, 22, 26, 29, 37, 31, 26, 27,
              35, 28, 22, 22, 32, 44, 32, 35, 38, 39, 41, 42, 41, 25, 31, 45, 48, 45, 40, 48, 37,
              40, 41, 40, -1, -37, 0, 67, 1, 7, 7, 7, 10, 8, 10, 19, 10, 10, 19, 40, 26, 22, 26,
              40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40,
              40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40,
              40, 40, 40, 40, 40, 40, 40, 40, -1, -64, 0, 17, 8, 0, 53, 0, -126, 3, 1, 34, 0, 2,
              17, 1, 3, 17, 1, -1, -60, 0, 31, 0, 0, 1, 5, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0,
              0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, -1, -60, 0, -75, 16, 0, 2, 1, 3, 3, 2, 4, 3, 5,
              5, 4, 4, 0, 0, 1, 125, 1, 2, 3, 0, 4, 17, 5, 18, 33, 49, 65, 6, 19, 81, 97, 7, 34,
              113, 20, 50, -127, -111, -95, 8, 35, 66, -79, -63, 21, 82, -47, -16, 36, 51, 98, 114,
              -126, 9, 10, 22, 23, 24, 25, 26, 37, 38, 39, 40, 41, 42, 52, 53, 54, 55, 56, 57, 58,
              67, 68, 69, 70, 71, 72, 73, 74, 83, 84, 85, 86, 87, 88, 89, 90, 99, 100, 101, 102,
              103, 104, 105, 106, 115, 116, 117, 118, 119, 120, 121, 122, -125, -124, -123, -122,
              -121, -120, -119, -118, -110, -109, -108, -107, -106, -105, -104, -103, -102, -94,
              -93, -92, -91, -90, -89, -88, -87, -86, -78, -77, -76, -75, -74, -73, -72, -71, -70,
              -62, -61, -60, -59, -58, -57, -56, -55, -54, -46, -45, -44, -43, -42, -41, -40, -39,
              -38, -31, -30, -29, -28, -27, -26, -25, -24, -23, -22, -15, -14, -13, -12, -11, -10,
              -9, -8, -7, -6, -1, -60, 0, 31, 1, 0, 3, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0,
              1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, -1, -60, 0, -75, 17, 0, 2, 1, 2, 4, 4, 3, 4, 7, 5,
              4, 4, 0, 1, 2, 119, 0, 1, 2, 3, 17, 4, 5, 33, 49, 6, 18, 65, 81, 7, 97, 113, 19, 34,
              50, -127, 8, 20, 66, -111, -95, -79, -63, 9, 35, 51, 82, -16, 21, 98, 114, -47, 10,
              22, 36, 52, -31, 37, -15, 23, 24, 25, 26, 38, 39, 40, 41, 42, 53, 54, 55, 56, 57, 58,
              67, 68, 69, 70, 71, 72, 73, 74, 83, 84, 85, 86, 87, 88, 89, 90, 99, 100, 101, 102,
              103, 104, 105, 106, 115, 116, 117, 118, 119, 120, 121, 122, -126, -125, -124, -123,
              -122, -121, -120, -119, -118, -110, -109, -108, -107, -106, -105, -104, -103, -102,
              -94, -93, -92, -91, -90, -89, -88, -87, -86, -78, -77, -76, -75, -74, -73, -72, -71,
              -70, -62, -61, -60, -59, -58, -57, -56, -55, -54, -46, -45, -44, -43, -42, -41, -40,
              -39, -38, -30, -29, -28, -27, -26, -25, -24, -23, -22, -14, -13, -12, -11, -10, -9,
              -8, -7, -6, -1, -38, 0, 12, 3, 1, 0, 2, 17, 3, 17, 0, 63, 0, -6, 122, 40, -48, -58,
              -124, -94, -25, 3, -75, 59, -53, 79, -18, 47, -27, 68, 95, -22, -109, -3, -47, 89,
              -38, -34, -65, -91, 104, 104, -115, -86, -34, -59, 111, -65, -18, 43, 100, -77, 125,
              20, 100, -97, -64, 87, 27, 113, -118, -69, 51, -47, 45, 77, 31, 45, 63, -72, -65,
              -107, 87, 75, -101, 39, 55, 1, 38, -74, 99, 110, 113, 48, 12, -89, -54, 56, -49, -51,
              -23, -57, 60, -43, 53, -15, 38, -109, -27, -93, -49, 120, -74, -117, 32, 5, 13, -30,
              53, -74, -4, -25, -18, -7, -127, 115, -45, -73, -88, -11, 21, -105, -29, 41, 68, -63,
              116, -69, 72, -82, 35, -44, 103, 97, 115, 109, 40, -120, -7, 50, 75, 24, 46, 17, -33,
              -95, 36, 70, 70, 15, 56, -26, -90, 83, -118, 87, 90, -125, 106, -38, 23, 116, 111,
              17, -23, 90, -58, -87, 117, 97, 100, 36, 105, 109, -48, 72, 89, -94, 42, -110, 41,
              -29, 114, -109, -44, 103, -65, 126, -39, -83, -65, 45, 63, -72, -65, -107, 115, 66,
              -14, 23, -69, -46, 60, 65, 2, -19, -126, -14, 53, -76, -72, -36, 57, 77, -57, 41,
              -97, 117, -109, 40, 127, -33, -10, -82, -94, -118, 110, -21, 80, -120, -49, 45, 63,
              -72, -65, -107, 30, 92, 127, -36, 95, -54, -80, -4, 111, -30, 40, 124, 49, -31, -7,
              -17, -28, -38, -45, 125, -56, 35, 63, -57, 33, -24, 62, -99, -49, -80, -81, 5, -69,
              -15, 95, -119, -19, 116, -53, -72, 38, -71, -107, 23, 80, -105, -49, -106, 113, -9,
              -40, -107, 3, 104, 63, -62, 48, 7, 3, 29, 49, -46, -80, -60, 98, -31, 65, -14, -75,
              114, 39, 81, 67, 67, -24, -85, 29, 67, 79, -65, -72, -70, -126, -50, 88, 102, -110,
              -43, -126, 77, -80, 100, 35, 30, -39, -23, -102, 124, 55, 118, 51, 94, -49, 103, 20,
              -42, -17, 117, 6, 60, -40, 65, 27, -45, 32, 17, -111, -41, -95, 21, -29, 127, 8, -68,
              67, -89, -8, 107, -61, -102, -107, -34, -86, -14, 36, 50, -35, -92, 74, 81, 11, 124,
              -37, 9, -24, 62, -122, -71, 31, 19, -36, -22, 55, -66, 33, -44, 124, 73, -89, 71,
              121, 21, -101, 92, -2, -26, -15, 85, -112, 1, -47, 112, -35, -114, 0, -84, 94, 57,
              42, 113, -99, -82, -34, -21, -56, -105, 85, 36, -99, -113, -93, -76, -3, 67, 79, -44,
              38, -69, -122, -46, 88, -92, -106, -42, 67, 20, -56, 7, 40, -61, -44, 127, 90, -69,
              -27, -89, -9, 23, -14, -81, 14, -75, -48, 124, 67, -32, -55, -93, -15, 118, -91, 121,
              27, -17, -71, 67, 121, 20, 78, 92, -68, 114, 55, -52, 88, -114, 15, 36, 116, -49, 36,
              30, -43, -18, 72, -54, -24, -84, -124, 50, -80, -56, 35, -95, 21, -45, 66, -85, -88,
              -102, -100, 108, -1, 0, 66, -31, 46, 109, -48, -98, 90, 127, 113, 127, 42, 60, -76,
              -2, -30, -2, 84, 75, 34, -59, 19, -55, 33, -38, -120, 11, 49, -12, 2, -71, -81, 10,
              -8, -25, 69, -15, 52, -83, 13, -116, -17, 29, -46, -25, -9, 19, -128, -82, -61, -43,
              121, -63, -2, 117, -77, -108, 34, -44, 91, -43, -108, -38, 78, -57, 75, -27, -89, -9,
              23, -14, -93, -53, 79, -18, 47, -27, 79, -94, -86, -56, 118, 51, 101, 24, -111, -64,
              -23, -109, 69, 18, -1, 0, -83, 127, -9, -115, 21, -54, -9, 48, 101, -8, -65, -43, 39,
              -5, -94, -71, 31, -120, 90, 71, -121, 111, 18, -46, -9, -60, 119, 109, 102, -48, 110,
              72, 38, 89, 54, -112, -57, -98, -35, 72, -58, 107, -82, -117, -3, 82, 127, -70, 42,
              -114, -73, -94, -23, -6, -27, -76, 118, -6, -83, -78, -36, -61, 28, -126, 85, 70, 36,
              0, -64, 17, -98, 15, -95, 53, -75, 72, 115, -61, -106, -55, -6, -101, 53, 117, 99,
              58, 38, -77, -41, 60, 47, 34, 120, -122, 40, 93, 34, 13, 21, -30, -65, -35, 71, 78,
              25, -77, -40, 127, 16, 62, -124, 26, -53, -70, -67, -42, 124, 38, -119, 36, -120, -6,
              -41, -121, -64, 31, -66, 78, 110, 109, -45, -43, -79, -60, -118, 7, 126, 15, -83,
              107, -68, 81, -23, -2, 32, -14, -39, 7, -40, 117, 88, -4, -74, 83, -9, 68, -56, -68,
              127, -33, 81, -126, 63, -19, -104, -11, -82, 67, 72, -101, 90, -16, -66, -83, 6,
              -115, -91, 105, -70, -122, -89, 100, -110, -55, 28, -86, -33, -22, -29, 78, 30, 54,
              73, 27, 10, -89, 99, 96, -87, 56, -56, -29, 4, -42, 21, 27, -115, -81, -66, -41, 95,
              -27, -42, -28, 55, 99, 87, 69, -15, 14, -105, -30, 93, 87, 93, -16, -20, 66, 15, -78,
              -19, -13, 97, -106, -33, -27, -13, 85, -44, 23, 111, -9, -61, -79, 57, -9, -23, -112,
              73, -22, -84, 110, -102, -30, 121, 18, 22, 73, 109, -96, -52, 79, 35, 49, 18, -7,
              -86, 112, 65, 93, -96, 99, 24, 57, -49, 57, -32, 99, 6, -71, -120, 124, 39, -94, -65,
              -118, 34, -15, 6, -127, 114, -79, -49, 108, -51, -10, -120, 44, -39, 25, 101, 37, 79,
              -54, 70, 112, -92, -28, 103, -41, -40, -13, 80, -4, 73, -42, 33, -16, -59, -101, -52,
              -6, 60, -105, -42, -38, -95, 49, 93, 50, 93, 60, 32, 16, -96, 0, 112, 15, 37, 65, 25,
              24, 56, 90, 113, -100, -87, -63, -50, -91, -76, -4, -70, 127, -112, 38, -30, -81, 35,
              -109, -8, -121, 14, -79, -85, -8, -78, 73, 47, 108, 110, -96, -46, 116, -36, 44, 12,
              -56, 76, 110, 78, 62, 125, -61, -114, 78, 63, 32, 14, 14, 107, -100, -43, 116, -58,
              -44, -30, -119, 12, -62, 56, -112, -27, -126, -82, 114, 123, 119, -12, 53, -48, 104,
              127, 18, 97, -79, -80, -74, -80, -47, 108, 45, -84, -83, -43, -10, 71, 109, 43, 73,
              41, 66, -60, -110, 119, -110, 50, 55, 19, -12, -51, 95, -44, 124, 85, 107, -85, 94,
              -38, -40, 77, -31, 43, 61, 70, -13, 80, -3, -53, 73, -26, -124, 36, -32, 12, -18,
              -40, 89, 112, 57, -50, 114, 0, -21, -59, 121, -14, 84, -86, 94, 92, -38, -65, 95,
              -21, -16, 50, 124, -78, -42, -25, 5, -31, -97, 4, -34, 107, -79, -21, 50, 66, -52,
              32, -45, -47, -10, 16, 63, -42, -54, 6, 66, 15, -64, 115, -8, 122, -41, -81, -39, 50,
              -8, -21, -31, 103, -105, -63, -71, -102, -37, -53, 62, -45, 39, 79, -90, 89, 65, -6,
              26, -22, -12, 77, 38, -53, 68, -45, -46, -53, 76, -73, 91, 123, 100, 37, -126, 6, 45,
              -55, -28, -110, 79, 39, -15, -84, -33, 12, -23, 26, 95, -121, -82, -17, -84, 52, -21,
              -62, 101, -71, -112, -34, 53, -93, -54, -124, -60, 9, -63, 42, -96, 2, 23, -96, -25,
              61, 7, 53, -41, 71, 9, -20, 116, -24, -43, -97, -24, 105, 26, 124, -70, 119, 42, -40,
              104, -41, -73, -33, 14, 19, 71, -42, -111, 18, -11, -20, -52, 12, 3, 110, -38, 64,
              -62, 18, 125, 70, 20, -97, 122, -121, -31, 70, -84, -38, -89, -125, -83, -93, -100,
              -97, -75, 88, -109, 105, 40, 61, 65, 78, -97, -8, -18, 63, 28, -45, -17, -68, 65,
              109, -31, -1, 0, 17, -35, -82, -83, 38, -91, 29, -108, -15, -122, 23, 87, 42, 62,
              -53, 27, 14, -111, -59, -75, 114, 88, -126, -60, -25, -97, -112, 117, -81, 62, 111,
              29, -61, 101, -82, -33, -89, -127, 52, -85, 98, 110, -27, 18, 75, 37, -61, 74, -58,
              -23, -53, 0, 54, 71, -111, -80, -18, 118, -23, -44, 122, 98, -100, -86, -62, -108,
              -94, -17, -74, -115, 117, -14, 7, 37, 22, -114, -49, 93, -44, 53, 93, 123, 82, -46,
              -49, -125, 53, 80, 44, -29, -72, -110, -34, -10, 68, -117, 114, 33, 0, 18, 73, 35, 7,
              -125, -64, -11, 35, -16, 93, 95, 71, -16, -25, -107, -91, -92, 118, -112, -36, -53,
              14, -96, -106, -119, 45, -76, -31, 36, 18, 96, -18, -13, 36, 95, -104, 17, -13, 49,
              0, -28, -80, 94, -103, 53, 22, -67, -84, 78, -70, 77, -58, -116, -38, -2, -97, 109,
              -30, 123, -124, 12, -30, 103, 49, -57, 10, -74, 78, -60, 96, 49, -112, 14, 1, 63, 49,
              -21, -23, 89, 122, 111, -125, -91, -97, -62, 22, 26, 46, -93, 23, -40, -124, -38,
              -104, -107, -4, -87, 67, -18, 85, -124, -110, -54, -61, -5, -59, 78, 61, 51, -19, 74,
              77, -54, 77, 37, 118, -2, -27, -27, -42, -34, 96, -11, 125, -49, 84, -94, -103, 18,
              44, 81, -92, 104, 48, -86, 2, -114, 115, -64, -89, -41, -96, 108, 102, -53, -2, -75,
              -1, 0, -34, 52, 81, 47, -6, -41, -1, 0, 120, -47, 92, -113, 115, -99, -105, -30, -1,
              0, 84, -97, -18, -118, 125, 50, 47, -11, 73, -2, -24, -89, -41, 82, -40, -35, 108,
              114, -33, 17, 117, -69, 125, 3, 64, -114, -6, -22, -59, -81, 66, -36, -57, -78, 53,
              -112, -57, -75, -63, -36, 27, 112, 7, 24, -37, -8, -12, -17, 89, -66, 37, -15, 52,
              -10, -66, 30, -45, 124, 87, -91, -57, -10, -69, 22, 64, 46, 109, 89, -56, 93, -84,
              70, 27, -72, 12, -82, 54, -25, 29, -49, -96, -82, -34, -30, 8, -82, 97, 104, -82, 34,
              73, 98, 97, -122, 71, 80, -54, 126, -96, -41, 13, -84, -8, 91, 90, -5, 53, -26, -113,
              -96, 79, -89, 91, 104, 87, -123, -99, -60, -56, 89, -31, -35, -9, -111, 20, 113, -76,
              -100, -80, -12, -55, -58, 48, 43, -102, -76, 106, 43, -72, -11, 93, 55, -71, 18, 79,
              -96, -49, 27, -37, 107, 51, -35, -24, 122, -65, -124, 109, -103, 47, -90, 33, 39,
              -112, -100, 15, 44, -128, 85, 101, 29, 10, -11, -25, -73, 110, 72, -91, -15, -75,
              -89, -120, -11, -3, 30, 61, 20, -24, -42, -37, 110, 29, 5, -59, -22, 92, -87, 72,
              -80, -32, -18, 69, 108, 55, 65, -6, -111, -49, 90, -18, -32, 67, 28, 17, -93, 16, 74,
              -88, 82, 71, -80, -87, 42, -98, 29, 75, -102, -19, -21, -72, -36, 47, 127, 51, -25,
              -97, -120, -66, 1, -73, -16, -114, -109, 105, 119, 5, -20, -41, 50, 75, 55, -106,
              -37, -108, 40, 31, 41, 60, 99, -23, -21, 93, -73, -63, -81, 7, 73, -91, -37, 54, -75,
              -87, -57, -74, -10, -27, 49, 2, 48, -26, 56, -49, 115, -24, 79, -24, 62, -90, -69,
              -19, 99, 70, -77, -42, 13, -105, -37, -29, -13, 82, -42, 113, 112, -120, 126, -23,
              96, -92, 12, -114, -29, -100, -29, -40, 86, -107, 99, 79, 3, 8, 85, -10, -117, 110,
              -120, -120, -46, 74, 87, 10, -32, 62, 40, -8, 107, 82, -44, 22, -33, 89, -16, -20,
              -78, -59, -85, 89, -93, 71, -120, -101, 107, -55, 27, 117, 10, 125, 70, 79, 29, -14,
              123, -30, -69, -6, 43, -86, -83, 53, 86, 46, 44, -46, 81, -26, 86, 103, -119, -22,
              -87, -29, 95, 6, 94, 105, -59, -75, -69, -85, -69, 59, -26, -118, 57, 100, -108, -7,
              -62, 57, 59, -89, -49, -100, 117, 56, 35, 25, -4, 43, -47, 111, -76, 56, -19, -4, 69,
              109, -86, 88, 104, 90, 108, -46, 41, 37, -26, 71, -14, 38, 70, 114, 124, -57, 32, 13,
              -78, 18, 49, -116, -112, 65, -49, 63, 55, 29, 13, -35, -76, 55, 112, 52, 55, 49, 44,
              -79, 49, 4, -85, 12, -116, -125, -112, 127, 2, 1, -87, -85, 40, 97, -108, 27, 87,
              -70, -23, -42, -33, 121, 42, 22, 57, -117, -65, 8, -39, -99, 38, -6, 61, 59, -3, 23,
              83, -69, 83, -69, 80, 117, 18, 76, 92, -14, 73, 111, 126, -104, 24, 3, 60, 99, -118,
              -27, -84, 60, 31, 117, 7, -123, 109, -12, 75, -69, -119, -90, -113, -5, 95, 119, -38,
              108, -33, -26, 84, -39, -126, -64, -13, -73, 15, -72, 28, -9, -51, 122, -123, 99, 39,
              -122, -12, -24, -75, -10, -42, 96, 73, -95, -67, 127, -11, -66, 84, -84, -87, 47, 24,
              -7, -108, 28, 31, -15, -26, -118, -104, 120, -74, -102, 94, 95, 32, 112, 76, -47,
              -45, -19, -123, -107, -123, -75, -86, -55, 36, -94, 8, -42, 48, -14, 28, -77, 109,
              24, -53, 30, -28, -29, -102, -79, 69, 21, -48, -107, -76, 52, 51, 101, -1, 0, 90, -1,
              0, -17, 26, 40, -105, -3, 107, -1, 0, -68, 104, -82, 87, -71, -50, -55, -110, -21,
              106, -127, -77, -96, -57, 90, 119, -38, -1, 0, -40, -3, 104, -94, -85, -98, 69, 115,
              48, -5, 95, -5, 31, -83, 31, 107, -1, 0, 99, -11, -94, -118, 61, -92, -125, -99,
              -121, -38, -1, 0, -40, -3, 104, -5, 95, -5, 31, -83, 20, 81, -19, 36, 28, -20, 62,
              -41, -2, -57, -21, 71, -38, -1, 0, -40, -3, 104, -94, -113, 105, 32, -25, 97, -10,
              -65, -10, 63, 90, 62, -41, -2, -57, -21, 69, 20, 123, 73, 7, 59, 15, -75, -1, 0, -79,
              -6, -47, -10, -65, -10, 63, 90, 40, -93, -38, 72, 57, -40, 125, -81, -3, -113, -42,
              -113, -75, -1, 0, -79, -6, -47, 69, 30, -46, 65, -50, -61, -19, 127, -20, 126, -76,
              125, -81, -3, -113, -42, -118, 40, -10, -110, 14, 118, 86, 115, -71, -119, -11, 57,
              -94, -118, 42, 73, 63, -1, -39,};
      Result<String> result =
          new Yundama(System.getProperty("yundama.username"),
              System.getProperty("yundama.password")).decode(img, YundamaType.ALPHABETIC4);
      if (result.success()) {
        logger.info("Text:{}", result.getResult());
      } else {
        logger.error("Error:{}", result.getError().getErrorCode());
      }
      Assert.assertTrue("nkha".equalsIgnoreCase(result.getResult()));
    } catch (Exception e) {
      e.printStackTrace();
      Assert.fail(e.getMessage());
    }
  }


}
